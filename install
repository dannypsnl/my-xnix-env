#!/usr/bin/env sh

curl https://nixos.org/nix/install | sh

touch "${HOME}"/.local.sh
touch "${HOME}"/.company.env

git config --global commit.template "$(pwd)"/git/git-message.txt
git config --global --add core.excludesfile "$(pwd)"/git/.gitignore
"$(pwd)"/git/git-alias-setting.sh

# setup zsh
[ -f "${HOME}"/.zshrc ] && rm "${HOME}"/.zshrc || true
ln -s "$(pwd)"/zsh-set/.zshrc "${HOME}"/.zshrc
sh -c "$(curl -fsSL https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh)"
# install zsh plugin: k
git clone https://github.com/supercrabtree/k $ZSH_CUSTOM/plugins/k

mkdir -p "${HOME}"/.config/nvim
[ -f "${HOME}"/.config/nvim/init.vim ] && rm "${HOME}"/.config/nvim/init.vim || true
ln -s "$(pwd)"/nvim-set/config/nvim/init.vim "${HOME}"/.config/nvim/init.vim
# Install VIM Plug
curl -fLo "${HOME}"/.local/share/nvim/site/autoload/plug.vim --create-dirs \
    https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim
# Install Spacemacs
git clone https://github.com/syl20bnr/spacemacs ~/.emacs.d
[ -f "${HOME}"/.spacemacs] && rm "${HOME}"/.spacemacs || true
ln -s "$(pwd)"/.spacemacs "${HOME}"/.spacemacs

# Nix
# terminal
nix-env -i direnv neovim silver-searcher
# language
nix-env -i cmake clang-tools llvm gcc racket go julia
# nix flakes
nix-env -iA nixpkgs.nixFlakes
